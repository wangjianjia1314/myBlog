<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>diff | gegeの</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="gege">
    
    <link rel="preload" href="/myBlog/assets/css/0.styles.455ea02c.css" as="style"><link rel="preload" href="/myBlog/assets/js/app.4adfd351.js" as="script"><link rel="preload" href="/myBlog/assets/js/2.d8ed40ee.js" as="script"><link rel="preload" href="/myBlog/assets/js/34.36fe581f.js" as="script"><link rel="prefetch" href="/myBlog/assets/js/10.09be3a32.js"><link rel="prefetch" href="/myBlog/assets/js/11.f51c87cb.js"><link rel="prefetch" href="/myBlog/assets/js/12.c9f98049.js"><link rel="prefetch" href="/myBlog/assets/js/13.a99d27ff.js"><link rel="prefetch" href="/myBlog/assets/js/14.e7dfb2a3.js"><link rel="prefetch" href="/myBlog/assets/js/15.74e242f8.js"><link rel="prefetch" href="/myBlog/assets/js/16.17d11dff.js"><link rel="prefetch" href="/myBlog/assets/js/17.396662b7.js"><link rel="prefetch" href="/myBlog/assets/js/18.187cee75.js"><link rel="prefetch" href="/myBlog/assets/js/19.e75e6024.js"><link rel="prefetch" href="/myBlog/assets/js/20.ddf816c1.js"><link rel="prefetch" href="/myBlog/assets/js/21.6a22b3af.js"><link rel="prefetch" href="/myBlog/assets/js/22.e0631e0a.js"><link rel="prefetch" href="/myBlog/assets/js/23.7ed342f6.js"><link rel="prefetch" href="/myBlog/assets/js/24.ea3eb4ba.js"><link rel="prefetch" href="/myBlog/assets/js/25.2435c04a.js"><link rel="prefetch" href="/myBlog/assets/js/26.29baccb4.js"><link rel="prefetch" href="/myBlog/assets/js/27.5be8c2b3.js"><link rel="prefetch" href="/myBlog/assets/js/28.450ed01f.js"><link rel="prefetch" href="/myBlog/assets/js/29.5e247502.js"><link rel="prefetch" href="/myBlog/assets/js/3.8b131455.js"><link rel="prefetch" href="/myBlog/assets/js/30.3e71ef55.js"><link rel="prefetch" href="/myBlog/assets/js/31.39ee42b1.js"><link rel="prefetch" href="/myBlog/assets/js/32.27220604.js"><link rel="prefetch" href="/myBlog/assets/js/33.48d4acfc.js"><link rel="prefetch" href="/myBlog/assets/js/35.c171d9b4.js"><link rel="prefetch" href="/myBlog/assets/js/4.c027e863.js"><link rel="prefetch" href="/myBlog/assets/js/5.3c5bb25b.js"><link rel="prefetch" href="/myBlog/assets/js/6.ea87f2ef.js"><link rel="prefetch" href="/myBlog/assets/js/7.4aca074c.js"><link rel="prefetch" href="/myBlog/assets/js/8.44290d70.js"><link rel="prefetch" href="/myBlog/assets/js/9.92c55972.js">
    <link rel="stylesheet" href="/myBlog/assets/css/0.styles.455ea02c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myBlog/" class="home-link router-link-active"><img src="/myBlog/assets/img/ava.png" alt="gegeの" class="logo"> <span class="site-name can-hide">gegeの</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myBlog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/myBlog/javascript/" class="nav-link">
  javascript
</a></div><div class="nav-item"><a href="/myBlog/css/" class="nav-link">
  css
</a></div><div class="nav-item"><a href="/myBlog/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/myBlog/vue/" class="nav-link router-link-active">
  vue
</a></div><div class="nav-item"><a href="/myBlog/html/" class="nav-link">
  html
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/myBlog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/myBlog/javascript/" class="nav-link">
  javascript
</a></div><div class="nav-item"><a href="/myBlog/css/" class="nav-link">
  css
</a></div><div class="nav-item"><a href="/myBlog/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/myBlog/vue/" class="nav-link router-link-active">
  vue
</a></div><div class="nav-item"><a href="/myBlog/html/" class="nav-link">
  html
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myBlog/vue/methods.html" class="sidebar-link">事件</a></li><li><a href="/myBlog/vue/underlying.html" aria-current="page" class="active sidebar-link">原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myBlog/vue/underlying.html#diff" class="sidebar-link">diff</a></li></ul></li><li><a href="/myBlog/vue/v3.html" class="sidebar-link">v3</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="diff"><a href="#diff" class="header-anchor">#</a> diff</h2> <ul><li>vue1.0 没有引入虚拟 dom vue2.0 引入虚拟 dom 是因为 vue1 在读取响应数据的时候会生成对应的 watcher 通过 dep 收集 watcher 出发 watcher 的更新函数达到数据驱动视图 大量的 watcher 会造成内存的浪费。vue2.0 加入了 diff 虚拟 dom 此时一个组件会对应一个 watcher 一个组件内多个数据发生改变的时候 只会收集一个 watcher 当数据发生改变的时候 会进行虚拟 dom 的对比 从而进行一次更新</li> <li>h 函数 会返回由真实 dom 转换为的 虚拟 dom 通过 path 函数进行新老节点的替换增加删除等操作 生成真实的 dom 进行渲染</li> <li>虚拟节点是什么
<ul><li>js 对象 描述的 真实 dom</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token punctuation">{</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">elm</span><span class="token operator">:</span>h1<span class="token punctuation">,</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sel</span><span class="token operator">:</span><span class="token string">'h1'</span>
    <span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">'内容'</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>新老节点的替换规则
<ul><li>1.节点不同直接删除老节点 替换成新节点</li> <li>2.key 的作用 做为唯一标识，确定是不是同一个节点</li> <li>3.同级比较 不能跨级</li> <li>4 核心
<ul><li>会有指针 指向 当前比对的哪个</li> <li>a)旧前 新前</li> <li>b)旧后 新后</li> <li>c)旧前 新后</li> <li>d)旧后 新前</li> <li>e)循环遍历</li> <li>f)以上会循环比对过程</li> <li>g)添加或删除</li></ul></li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/myBlog/vue/methods.html" class="prev">
        事件
      </a></span> <span class="next"><a href="/myBlog/vue/v3.html">
        v3
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/myBlog/assets/js/app.4adfd351.js" defer></script><script src="/myBlog/assets/js/2.d8ed40ee.js" defer></script><script src="/myBlog/assets/js/34.36fe581f.js" defer></script>
  </body>
</html>
